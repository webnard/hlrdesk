sudo: false

language: node_js
node_js:
- '0.11'

cache:
  directories:
  - node_modules

before_install:
- ls ~/.ssh/
- psql -c 'CREATE DATABASE travis;' -U postgres

after_success:
- if [ "$TRAVIS_BRANCH" == "master" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ];
  then npm run deploy dev; fi

- if [ "$TRAVIS_BRANCH" == "staging" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ];
  then npm run deploy staging; fi

addons:
  ssh_known_hosts:
  - hlrdev.byu.edu
  - hlrdesk.hlrdev.byu.edu
  - hlrdesk-staging.byu.edu
  - hlrdesk.byu.edu
